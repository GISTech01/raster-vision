{
  "commandType": "BUNDLE",
  "rootUri": "/opt/data/int-test-output/object_detection/bundle/object-detection-test",
  "bundleConfig": {
    "backend": {
      "pretrainedModelUri": "https://github.com/azavea/raster-vision-data/releases/download/v0.0.5/od-model.tar.gz",
      "backendType": "TF_OBJECT_DETECTION",
      "tfObjectDetectionConfig": {
        "replaceModel": true,
        "debug": false,
        "trainingDataUri": "/opt/data/int-test-output/object_detection/chip/object-detection-test",
        "tfodConfig": {
          "trainInputReader": {
            "labelMapPath": "",
            "tfRecordInputReader": {
              "inputPath": [
                ""
              ]
            }
          },
          "evalInputReader": [
            {
              "tfRecordInputReader": {
                "inputPath": [
                  ""
                ]
              },
              "labelMapPath": "",
              "shuffle": false,
              "numReaders": 1.0
            }
          ],
          "evalConfig": {
            "numVisualizations": 20.0,
            "numExamples": 2000.0
          },
          "model": {
            "ssd": {
              "similarityCalculator": {
                "iouSimilarity": null
              },
              "anchorGenerator": {
                "ssdAnchorGenerator": {
                  "maxScale": 0.949999988079071,
                  "numLayers": 6.0,
                  "minScale": 0.20000000298023224,
                  "aspectRatios": [
                    1.0,
                    2.0,
                    0.5,
                    3.0,
                    0.33329999446868896
                  ]
                }
              },
              "postProcessing": {
                "scoreConverter": "SIGMOID",
                "batchNonMaxSuppression": {
                  "scoreThreshold": 9.99999993922529e-09,
                  "iouThreshold": 0.6000000238418579,
                  "maxDetectionsPerClass": 100.0,
                  "maxTotalDetections": 100.0
                }
              },
              "loss": {
                "hardExampleMiner": {
                  "minNegativesPerImage": 0.0,
                  "iouThreshold": 0.9900000095367432,
                  "maxNegativesPerPositive": 3.0,
                  "lossType": "CLASSIFICATION",
                  "numHardExamples": 3000.0
                },
                "localizationLoss": {
                  "weightedSmoothL1": {
                    "anchorwiseOutput": true
                  }
                },
                "classificationLoss": {
                  "weightedSigmoid": {
                    "anchorwiseOutput": true
                  }
                },
                "localizationWeight": 1.0,
                "classificationWeight": 1.0
              },
              "boxPredictor": {
                "convolutionalBoxPredictor": {
                  "numLayersBeforePredictor": 0.0,
                  "convHyperparams": {
                    "batchNorm": {
                      "train": true,
                      "center": true,
                      "scale": true,
                      "decay": 0.9997000098228455,
                      "epsilon": 0.0010000000474974513
                    },
                    "regularizer": {
                      "l2Regularizer": {
                        "weight": 3.9999998989515007e-05
                      }
                    },
                    "initializer": {
                      "truncatedNormalInitializer": {
                        "mean": 0.0,
                        "stddev": 0.029999999329447746
                      }
                    },
                    "activation": "RELU_6"
                  },
                  "boxCodeSize": 4.0,
                  "minDepth": 0.0,
                  "useDropout": false,
                  "kernelSize": 1.0,
                  "maxDepth": 0.0,
                  "applySigmoidToScores": false,
                  "dropoutKeepProbability": 0.800000011920929
                }
              },
              "matcher": {
                "argmaxMatcher": {
                  "unmatchedThreshold": 0.5,
                  "ignoreThresholds": false,
                  "negativesLowerThanUnmatched": true,
                  "forceMatchForEachRow": true,
                  "matchedThreshold": 0.5
                }
              },
              "featureExtractor": {
                "convHyperparams": {
                  "batchNorm": {
                    "scale": true,
                    "decay": 0.9997000098228455,
                    "center": true,
                    "train": true,
                    "epsilon": 0.0010000000474974513
                  },
                  "regularizer": {
                    "l2Regularizer": {
                      "weight": 3.9999998989515007e-05
                    }
                  },
                  "activation": "RELU_6",
                  "initializer": {
                    "truncatedNormalInitializer": {
                      "mean": 0.0,
                      "stddev": 0.029999999329447746
                    }
                  }
                },
                "depthMultiplier": 1.0,
                "type": "ssd_mobilenet_v1",
                "minDepth": 16.0
              },
              "numClasses": 2.0,
              "boxCoder": {
                "fasterRcnnBoxCoder": {
                  "xScale": 10.0,
                  "yScale": 10.0,
                  "widthScale": 5.0,
                  "heightScale": 5.0
                }
              },
              "imageResizer": {
                "fixedShapeResizer": {
                  "height": 300.0,
                  "width": 300.0
                }
              },
              "normalizeLossByNumMatches": true
            }
          },
          "trainConfig": {
            "fineTuneCheckpoint": "https://github.com/azavea/raster-vision-data/releases/download/v0.0.5/od-model.tar.gz",
            "batchSize": 1.0,
            "fineTuneCheckpointType": "detection",
            "loadAllDetectionCheckpointVars": true,
            "optimizer": {
              "rmsPropOptimizer": {
                "decay": 0.8999999761581421,
                "learningRate": {
                  "exponentialDecayLearningRate": {
                    "decayFactor": 0.949999988079071,
                    "decaySteps": 800720.0,
                    "initialLearningRate": 0.004000000189989805
                  }
                },
                "momentumOptimizerValue": 0.8999999761581421,
                "epsilon": 1.0
              }
            },
            "numSteps": 350.0
          }
        },
        "modelUri": "model",
        "fineTuneCheckpointName": "object-detection-test",
        "trainingOutputUri": "/opt/data/int-test-output/object_detection/train/object-detection-test",
        "modelMainPy": "/opt/tf-models/object_detection/model_main.py",
        "syncInterval": 600,
        "exportPy": "/opt/tf-models/object_detection/export_inference_graph.py",
        "doMonitoring": false
      }
    },
    "task": {
      "objectDetectionConfig": {
        "classItems": [
          {
            "color": "blue",
            "name": "car",
            "id": 1
          },
          {
            "color": "red",
            "name": "building",
            "id": 2
          }
        ],
        "predictOptions": {
          "scoreThresh": 0.5,
          "mergeThresh": 0.10000000149011612
        },
        "chipSize": 300,
        "chipOptions": {
          "ioaThresh": 1.0,
          "windowMethod": "sliding",
          "labelBuffer": 0.0,
          "negRatio": 0.0
        }
      },
      "debug": true,
      "taskType": "OBJECT_DETECTION",
      "predictDebugUri": "",
      "predictPackageUri": "/opt/data/int-test-output/object_detection/bundle/object-detection-test/predict_package.zip",
      "predictBatchSize": 10
    },
    "scene": {
      "groundTruthLabelSource": {
        "objectDetectionGeojsonSource": {
          "uri": "/opt/src/integration_tests/object_detection_tests/scene/labels.json"
        },
        "sourceType": "OBJECT_DETECTION_GEOJSON"
      },
      "id": "od_test",
      "rasterSource": {
        "channelOrder": [
          0,
          1,
          2
        ],
        "sourceType": "GEOTIFF_SOURCE",
        "geotiffFiles": {
          "uris": [
            "BUNDLE"
          ]
        }
      }
    }
  },
  "plugins": {}
}